{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactjs_template\\\\reactjs_template\\\\src\\\\containers\\\\Maps\\\\VectorMap\\\\components\\\\Map.jsx\";\nimport React, { useEffect } from 'react';\nimport * as am4core from '@amcharts/amcharts4/core';\nimport * as am4maps from '@amcharts/amcharts4/maps';\nimport { Card, CardBody, Col } from 'reactstrap';\nimport { useTranslation } from 'react-i18next';\nimport { transparentize } from 'polished';\nimport maps from './world';\nimport data from './world-population-density.json'; // you can find demos here: https://www.amcharts.com/demos\n\nconst strokeColor = '#4ce1b6';\nconst mapMainColor = '#4ce1b6';\nconst lightGrayColor = '#F2F2F2';\nconst lightTextColor = '#93A2AF';\nconst whiteColor = '#FFFFFF';\nconst heatRule = {\n  property: 'fill',\n  min: am4core.color('#ffffff')\n};\n\nconst Map = () => {\n  const {\n    t\n  } = useTranslation('common');\n  useEffect(() => {\n    const map = am4core.create('chartdiv', am4maps.MapChart);\n    map.geodata = maps;\n    map.centerMapOnZoomOut = false; // Set projection\n\n    map.projection = new am4maps.projections.Miller();\n    const polygonSeries = map.series.push(new am4maps.MapPolygonSeries());\n    heatRule.max = am4core.color(mapMainColor);\n    heatRule.target = polygonSeries.mapPolygons.template;\n    polygonSeries.heatRules.push(heatRule);\n    polygonSeries.useGeodata = true;\n    const label = map.createChild(am4core.Label);\n    label.text = t('vector_map.population_density');\n    label.fontSize = 12;\n    label.align = 'center';\n    label.valign = 'bottom';\n    label.fill = am4core.color(lightTextColor);\n    label.padding(0, 0, 50, 0);\n    const noDataLabel = map.createChild(am4core.Label);\n    noDataLabel.text = t('no_available_data');\n    noDataLabel.fontSize = 12;\n    noDataLabel.align = 'center';\n    noDataLabel.valign = 'middle';\n    noDataLabel.padding(10, 20, 10, 20);\n    noDataLabel.background.fill = am4core.color(lightGrayColor);\n    noDataLabel.background.stroke = am4core.color('#000000');\n    noDataLabel.fillOpacity = data.length === 0 ? 1 : 0;\n    noDataLabel.background.strokeOpacity = data.length === 0 ? 1 : 0;\n    const heatLegend = map.createChild(am4maps.HeatLegend);\n    heatLegend.series = polygonSeries;\n    heatLegend.padding(0, 20, 12, 20);\n    heatLegend.width = 300;\n    heatLegend.valueAxis.renderer.minGridDistance = 60;\n    heatLegend.valueAxis.numberFormatter.numberFormat = '#.a';\n    heatLegend.valueAxis.renderer.labels.template.adapter.add('text', text => data.length > 0 ? text : '');\n    heatLegend.align = 'center';\n    heatLegend.valign = 'bottom';\n    heatLegend.minColor = '#FFF';\n    heatLegend.maxColor = mapMainColor;\n    heatLegend.valueAxis.tooltip.background.fill = am4core.color(whiteColor);\n    heatLegend.valueAxis.tooltip.background.stroke = am4core.color(mapMainColor);\n    heatLegend.valueAxis.tooltip.label.fill = am4core.color('#000');\n    heatLegend.stroke = am4core.color(lightTextColor);\n    heatLegend.valueAxis.strokeWidth = 0;\n    const polygonTemplate = polygonSeries.mapPolygons.template;\n    let minRange = heatLegend.valueAxis.axisRanges.create();\n    minRange.label.paddingTop = -15;\n    let maxRange = heatLegend.valueAxis.axisRanges.create();\n    maxRange.label.paddingTop = -15;\n    heatLegend.valueAxis.renderer.labels.template.adapter.add('text', () => '');\n    polygonSeries.events.on('datavalidated', () => {\n      const min = heatLegend.series.dataItem.values.value.low;\n      minRange = heatLegend.valueAxis.axisRanges.getIndex(0);\n      minRange.value = min;\n      minRange.label.text = `${min}`;\n      const max = heatLegend.series.dataItem.values.value.high;\n      maxRange = heatLegend.valueAxis.axisRanges.getIndex(1);\n      maxRange.value = max;\n      maxRange.label.text = `${heatLegend.numberFormatter.format(max)}`;\n      minRange.label.fill = am4core.color(lightTextColor);\n      maxRange.label.fill = am4core.color(lightTextColor);\n\n      if (min === max) {\n        minRange.label.paddingRight = 300;\n        maxRange.label.paddingLeft = 300;\n      } else {\n        minRange.label.paddingRight = 45;\n        maxRange.label.paddingLeft = 45;\n      }\n    });\n    polygonTemplate.nonScalingStroke = true;\n    polygonTemplate.strokeWidth = 0.5;\n    polygonTemplate.fill = am4core.color('#f7f7f7');\n    polygonTemplate.stroke = am4core.color('#999999');\n\n    const tooltipFormatter = target => {\n      const {\n        value\n      } = target.dataItem.dataContext;\n      const textValue = value >= 0 ? `: ${value}` : '';\n      return `${t(`vector_map.countries.${target.dataItem.dataContext['hc-key']}`)}${textValue}`;\n    };\n\n    polygonSeries.data = [...data];\n    polygonTemplate.adapter.add('tooltipText', (text, target) => tooltipFormatter(target));\n    polygonSeries.tooltip.getFillFromObject = false;\n    polygonSeries.tooltip.background.fill = am4core.color(`${transparentize(0.2, '#FFF')}`);\n    polygonSeries.tooltip.label.fill = am4core.color('#000');\n\n    const handleHover = mapPolygon => {\n      // eslint-disable-next-line no-restricted-globals\n      if (!isNaN(mapPolygon.dataItem.value)) {\n        heatLegend.valueAxis.showTooltipAt(mapPolygon.dataItem.value);\n      } else {\n        heatLegend.valueAxis.hideTooltip();\n      }\n    };\n\n    polygonSeries.mapPolygons.template.events.on('over', event => {\n      handleHover(event.target);\n    });\n    polygonSeries.mapPolygons.template.events.on('hit', event => {\n      handleHover(event.target);\n    });\n    polygonSeries.mapPolygons.template.events.on('out', () => {\n      heatLegend.valueAxis.hideTooltip();\n    });\n    const hs = polygonTemplate.states.create('hover');\n    hs.properties.stroke = am4core.color(strokeColor);\n    hs.properties.strokeWidth = 2;\n    const zoomControl = new am4maps.ZoomControl();\n    zoomControl.align = 'left';\n    zoomControl.valign = 'middle';\n    map.zoomControl = zoomControl;\n  }, [t]);\n  return /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"bold-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, t('maps.vector_map.vector_world_map'))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"chartdiv\",\n    style: {\n      width: '100%',\n      height: '55vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Map;","map":{"version":3,"sources":["D:/reactjs_template/reactjs_template/src/containers/Maps/VectorMap/components/Map.jsx"],"names":["React","useEffect","am4core","am4maps","Card","CardBody","Col","useTranslation","transparentize","maps","data","strokeColor","mapMainColor","lightGrayColor","lightTextColor","whiteColor","heatRule","property","min","color","Map","t","map","create","MapChart","geodata","centerMapOnZoomOut","projection","projections","Miller","polygonSeries","series","push","MapPolygonSeries","max","target","mapPolygons","template","heatRules","useGeodata","label","createChild","Label","text","fontSize","align","valign","fill","padding","noDataLabel","background","stroke","fillOpacity","length","strokeOpacity","heatLegend","HeatLegend","width","valueAxis","renderer","minGridDistance","numberFormatter","numberFormat","labels","adapter","add","minColor","maxColor","tooltip","strokeWidth","polygonTemplate","minRange","axisRanges","paddingTop","maxRange","events","on","dataItem","values","value","low","getIndex","high","format","paddingRight","paddingLeft","nonScalingStroke","tooltipFormatter","dataContext","textValue","getFillFromObject","handleHover","mapPolygon","isNaN","showTooltipAt","hideTooltip","event","hs","states","properties","zoomControl","ZoomControl","height"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as am4core from '@amcharts/amcharts4/core';\nimport * as am4maps from '@amcharts/amcharts4/maps';\nimport { Card, CardBody, Col } from 'reactstrap';\nimport { useTranslation } from 'react-i18next';\nimport { transparentize } from 'polished';\nimport maps from './world';\nimport data from './world-population-density.json';\n\n// you can find demos here: https://www.amcharts.com/demos\n\nconst strokeColor = '#4ce1b6';\nconst mapMainColor = '#4ce1b6';\nconst lightGrayColor = '#F2F2F2';\nconst lightTextColor = '#93A2AF';\nconst whiteColor = '#FFFFFF';\n\nconst heatRule = {\n  property: 'fill',\n  min: am4core.color('#ffffff'),\n};\n\nconst Map = () => {\n  const { t } = useTranslation('common');\n\n  useEffect(() => {\n    const map = am4core.create('chartdiv', am4maps.MapChart);\n\n    map.geodata = maps;\n\n    map.centerMapOnZoomOut = false;\n    // Set projection\n    map.projection = new am4maps.projections.Miller();\n\n    const polygonSeries = map.series.push(new am4maps.MapPolygonSeries());\n\n    heatRule.max = am4core.color(mapMainColor);\n    heatRule.target = polygonSeries.mapPolygons.template;\n\n    polygonSeries.heatRules.push(heatRule);\n\n    polygonSeries.useGeodata = true;\n    const label = map.createChild(am4core.Label);\n    label.text = t('vector_map.population_density');\n    label.fontSize = 12;\n    label.align = 'center';\n    label.valign = 'bottom';\n    label.fill = am4core.color(lightTextColor);\n    label.padding(0, 0, 50, 0);\n    const noDataLabel = map.createChild(am4core.Label);\n    noDataLabel.text = t('no_available_data');\n    noDataLabel.fontSize = 12;\n    noDataLabel.align = 'center';\n    noDataLabel.valign = 'middle';\n    noDataLabel.padding(10, 20, 10, 20);\n    noDataLabel.background.fill = am4core.color(lightGrayColor);\n    noDataLabel.background.stroke = am4core.color('#000000');\n    noDataLabel.fillOpacity = data.length === 0 ? 1 : 0;\n    noDataLabel.background.strokeOpacity = data.length === 0 ? 1 : 0;\n    const heatLegend = map.createChild(am4maps.HeatLegend);\n    heatLegend.series = polygonSeries;\n    heatLegend.padding(0, 20, 12, 20);\n    heatLegend.width = 300;\n    heatLegend.valueAxis.renderer.minGridDistance = 60;\n    heatLegend.valueAxis.numberFormatter.numberFormat = '#.a';\n    heatLegend.valueAxis.renderer.labels.template.adapter.add('text', text => (data.length > 0 ? text : ''));\n    heatLegend.align = 'center';\n    heatLegend.valign = 'bottom';\n    heatLegend.minColor = '#FFF';\n    heatLegend.maxColor = mapMainColor;\n    heatLegend.valueAxis.tooltip.background.fill = am4core.color(whiteColor);\n    heatLegend.valueAxis.tooltip.background.stroke = am4core.color(mapMainColor);\n    heatLegend.valueAxis.tooltip.label.fill = am4core.color('#000');\n    heatLegend.stroke = am4core.color(lightTextColor);\n    heatLegend.valueAxis.strokeWidth = 0;\n\n    const polygonTemplate = polygonSeries.mapPolygons.template;\n\n    let minRange = heatLegend.valueAxis.axisRanges.create();\n    minRange.label.paddingTop = -15;\n\n    let maxRange = heatLegend.valueAxis.axisRanges.create();\n    maxRange.label.paddingTop = -15;\n\n    heatLegend.valueAxis.renderer.labels.template.adapter.add('text', () => (''));\n\n    polygonSeries.events.on('datavalidated', () => {\n      const min = heatLegend.series.dataItem.values.value.low;\n      minRange = heatLegend.valueAxis.axisRanges.getIndex(0);\n      minRange.value = min;\n      minRange.label.text = `${min}`;\n\n      const max = heatLegend.series.dataItem.values.value.high;\n      maxRange = heatLegend.valueAxis.axisRanges.getIndex(1);\n      maxRange.value = max;\n      maxRange.label.text = `${heatLegend.numberFormatter.format(max)}`;\n\n      minRange.label.fill = am4core.color(lightTextColor);\n      maxRange.label.fill = am4core.color(lightTextColor);\n\n      if (min === max) {\n        minRange.label.paddingRight = 300;\n        maxRange.label.paddingLeft = 300;\n      } else {\n        minRange.label.paddingRight = 45;\n        maxRange.label.paddingLeft = 45;\n      }\n    });\n\n    polygonTemplate.nonScalingStroke = true;\n    polygonTemplate.strokeWidth = 0.5;\n    polygonTemplate.fill = am4core.color('#f7f7f7');\n    polygonTemplate.stroke = am4core.color('#999999');\n\n    const tooltipFormatter = (target) => {\n      const { value } = target.dataItem.dataContext;\n      const textValue = value >= 0 ? `: ${value}` : '';\n\n      return `${t(`vector_map.countries.${target.dataItem.dataContext['hc-key']}`)}${textValue}`;\n    };\n\n    polygonSeries.data = [...data];\n    polygonTemplate.adapter.add('tooltipText', (text, target) => tooltipFormatter(target));\n    polygonSeries.tooltip.getFillFromObject = false;\n    polygonSeries.tooltip.background.fill = am4core.color(`${transparentize(0.2, '#FFF')}`);\n    polygonSeries.tooltip.label.fill = am4core.color('#000');\n\n    const handleHover = (mapPolygon) => {\n      // eslint-disable-next-line no-restricted-globals\n      if (!isNaN(mapPolygon.dataItem.value)) {\n        heatLegend.valueAxis.showTooltipAt(mapPolygon.dataItem.value);\n      } else {\n        heatLegend.valueAxis.hideTooltip();\n      }\n    };\n\n    polygonSeries.mapPolygons.template.events.on('over', (event) => {\n      handleHover(event.target);\n    });\n\n    polygonSeries.mapPolygons.template.events.on('hit', (event) => {\n      handleHover(event.target);\n    });\n\n    polygonSeries.mapPolygons.template.events.on('out', () => {\n      heatLegend.valueAxis.hideTooltip();\n    });\n\n    const hs = polygonTemplate.states.create('hover');\n    hs.properties.stroke = am4core.color(strokeColor);\n    hs.properties.strokeWidth = 2;\n    const zoomControl = new am4maps.ZoomControl();\n    zoomControl.align = 'left';\n    zoomControl.valign = 'middle';\n    map.zoomControl = zoomControl;\n  }, [t]);\n\n  return (\n    <Col md={12} lg={12}>\n      <Card>\n        <CardBody>\n          <div className=\"card__title\">\n            <h5 className=\"bold-text\">{t('maps.vector_map.vector_world_map')}</h5>\n          </div>\n          <div id=\"chartdiv\" style={{ width: '100%', height: '55vh' }} />\n        </CardBody>\n      </Card>\n    </Col>\n  );\n};\n\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}