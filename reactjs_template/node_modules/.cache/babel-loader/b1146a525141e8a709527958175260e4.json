{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactjs_template\\\\reactjs_template\\\\src\\\\shared\\\\components\\\\auth\\\\withAuthFirebase.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport * as firebase from 'firebase/app';\nimport PropTypes from 'prop-types';\nimport ModalLoginForm from '../ModalLoginForm';\nimport { auth, authError } from '../../../redux/actions/authActions';\n\nfunction withAuthFirebase(WrappedComponent) {\n  class HocAuth extends Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {\n        error: '',\n        isOpen: false\n      };\n\n      this.closeModal = () => {\n        this.setState(prevState => ({\n          isOpen: !prevState.isOpen\n        }));\n      };\n\n      this.onSubmitFireBase = ({\n        username,\n        password\n      }) => {\n        const {\n          history,\n          dispatch\n        } = this.props;\n        this.setState({\n          error: ''\n        });\n        firebase.auth().signInWithEmailAndPassword(username, password).then(res => {\n          dispatch(auth({\n            name: res.user.email\n          }));\n          history.push('/dashboard_mobile_app');\n          this.setState({\n            isOpen: false\n          });\n        }).catch(error => {\n          this.setState({\n            error: error.message\n          });\n        });\n      };\n\n      this.onLoginGoogle = () => {\n        const {\n          history,\n          dispatch\n        } = this.props;\n        const provider = new firebase.auth.GoogleAuthProvider();\n        firebase.auth().signInWithPopup(provider).then(res => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({\n            name: res.user.displayName,\n            avatar: res.user.photoURL\n          }));\n          history.push('/dashboard_mobile_app');\n        }).catch(error => {\n          dispatch(authError(error.message));\n        });\n      };\n\n      this.onLoginFacebook = () => {\n        const {\n          history,\n          dispatch\n        } = this.props;\n        const provider = new firebase.auth.FacebookAuthProvider();\n        firebase.auth().signInWithPopup(provider).then(res => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({\n            name: res.user.displayName,\n            avatar: res.user.photoURL\n          }));\n          history.push('/dashboard_mobile_app');\n        }).catch(error => {\n          dispatch(authError(error.message));\n        });\n      };\n\n      this.changeIsOpenModalFireBase = () => {\n        this.setState({\n          isOpen: true,\n          error: ''\n        });\n      };\n    }\n\n    render() {\n      const {\n        error,\n        isOpen\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"account\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ModalLoginForm, {\n        title: \"Sign in with Firebase\",\n        isOpen: isOpen,\n        error: error,\n        form: \"log_in_modal\",\n        onSubmit: this.onSubmitFireBase,\n        closeModal: this.closeModal,\n        onGoogleClick: this.onLoginGoogle,\n        onFacebookClick: this.onLoginFacebook,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({}, this.props, {\n        changeIsOpenModalFireBase: this.changeIsOpenModalFireBase,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      })));\n    }\n\n  }\n\n  HocAuth.propTypes = {\n    history: PropTypes.shape({\n      push: PropTypes.func\n    }).isRequired,\n    dispatch: PropTypes.func.isRequired\n  };\n  return connect()(withRouter(HocAuth));\n}\n\nexport default withAuthFirebase;","map":{"version":3,"sources":["D:/reactjs_template/reactjs_template/src/shared/components/auth/withAuthFirebase.jsx"],"names":["React","Component","withRouter","connect","firebase","PropTypes","ModalLoginForm","auth","authError","withAuthFirebase","WrappedComponent","HocAuth","state","error","isOpen","closeModal","setState","prevState","onSubmitFireBase","username","password","history","dispatch","props","signInWithEmailAndPassword","then","res","name","user","email","push","catch","message","onLoginGoogle","provider","GoogleAuthProvider","signInWithPopup","localStorage","setItem","credential","accessToken","displayName","avatar","photoURL","onLoginFacebook","FacebookAuthProvider","changeIsOpenModalFireBase","render","propTypes","shape","func","isRequired"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,QAAZ,MAA0B,cAA1B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,oCAAhC;;AAEA,SAASC,gBAAT,CAA0BC,gBAA1B,EAA4C;AAC1C,QAAMC,OAAN,SAAsBV,SAAtB,CAAgC;AAAA;AAAA;AAAA,WAQ9BW,KAR8B,GAQtB;AACNC,QAAAA,KAAK,EAAE,EADD;AAENC,QAAAA,MAAM,EAAE;AAFF,OARsB;;AAAA,WAa9BC,UAb8B,GAajB,MAAM;AACjB,aAAKC,QAAL,CAAcC,SAAS,KAAK;AAC1BH,UAAAA,MAAM,EAAE,CAACG,SAAS,CAACH;AADO,SAAL,CAAvB;AAGD,OAjB6B;;AAAA,WAmB9BI,gBAnB8B,GAmBX,CAAC;AAAEC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAD,KAA4B;AAC7C,cAAM;AAAEC,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAwB,KAAKC,KAAnC;AACA,aAAKP,QAAL,CAAc;AAAEH,UAAAA,KAAK,EAAE;AAAT,SAAd;AACAT,QAAAA,QAAQ,CAACG,IAAT,GAAgBiB,0BAAhB,CAA2CL,QAA3C,EAAqDC,QAArD,EAA+DK,IAA/D,CAAqEC,GAAD,IAAS;AAC3EJ,UAAAA,QAAQ,CAACf,IAAI,CAAC;AAAEoB,YAAAA,IAAI,EAAED,GAAG,CAACE,IAAJ,CAASC;AAAjB,WAAD,CAAL,CAAR;AACAR,UAAAA,OAAO,CAACS,IAAR,CAAa,uBAAb;AACA,eAAKd,QAAL,CAAc;AAAEF,YAAAA,MAAM,EAAE;AAAV,WAAd;AACD,SAJD,EAIGiB,KAJH,CAIUlB,KAAD,IAAW;AAClB,eAAKG,QAAL,CAAc;AAAEH,YAAAA,KAAK,EAAEA,KAAK,CAACmB;AAAf,WAAd;AACD,SAND;AAOD,OA7B6B;;AAAA,WA+B9BC,aA/B8B,GA+Bd,MAAM;AACpB,cAAM;AAAEZ,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAwB,KAAKC,KAAnC;AACA,cAAMW,QAAQ,GAAG,IAAI9B,QAAQ,CAACG,IAAT,CAAc4B,kBAAlB,EAAjB;AACA/B,QAAAA,QAAQ,CAACG,IAAT,GAAgB6B,eAAhB,CAAgCF,QAAhC,EACGT,IADH,CACSC,GAAD,IAAS;AACbW,UAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCZ,GAAG,CAACa,UAAJ,CAAeC,WAA/C;AACAlB,UAAAA,QAAQ,CAACf,IAAI,CAAC;AAAEoB,YAAAA,IAAI,EAAED,GAAG,CAACE,IAAJ,CAASa,WAAjB;AAA8BC,YAAAA,MAAM,EAAEhB,GAAG,CAACE,IAAJ,CAASe;AAA/C,WAAD,CAAL,CAAR;AACAtB,UAAAA,OAAO,CAACS,IAAR,CAAa,uBAAb;AACD,SALH,EAMGC,KANH,CAMUlB,KAAD,IAAW;AAChBS,UAAAA,QAAQ,CAACd,SAAS,CAACK,KAAK,CAACmB,OAAP,CAAV,CAAR;AACD,SARH;AASD,OA3C6B;;AAAA,WA6C9BY,eA7C8B,GA6CZ,MAAM;AACtB,cAAM;AAAEvB,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAwB,KAAKC,KAAnC;AACA,cAAMW,QAAQ,GAAG,IAAI9B,QAAQ,CAACG,IAAT,CAAcsC,oBAAlB,EAAjB;AACAzC,QAAAA,QAAQ,CAACG,IAAT,GAAgB6B,eAAhB,CAAgCF,QAAhC,EACGT,IADH,CACSC,GAAD,IAAS;AACbW,UAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCZ,GAAG,CAACa,UAAJ,CAAeC,WAA/C;AACAlB,UAAAA,QAAQ,CAACf,IAAI,CAAC;AAAEoB,YAAAA,IAAI,EAAED,GAAG,CAACE,IAAJ,CAASa,WAAjB;AAA8BC,YAAAA,MAAM,EAAEhB,GAAG,CAACE,IAAJ,CAASe;AAA/C,WAAD,CAAL,CAAR;AACAtB,UAAAA,OAAO,CAACS,IAAR,CAAa,uBAAb;AACD,SALH,EAMGC,KANH,CAMUlB,KAAD,IAAW;AAChBS,UAAAA,QAAQ,CAACd,SAAS,CAACK,KAAK,CAACmB,OAAP,CAAV,CAAR;AACD,SARH;AASD,OAzD6B;;AAAA,WA2D9Bc,yBA3D8B,GA2DF,MAAM;AAChC,aAAK9B,QAAL,CAAc;AAAEF,UAAAA,MAAM,EAAE,IAAV;AAAgBD,UAAAA,KAAK,EAAE;AAAvB,SAAd;AACD,OA7D6B;AAAA;;AA+D9BkC,IAAAA,MAAM,GAAG;AACP,YAAM;AAAElC,QAAAA,KAAF;AAASC,QAAAA;AAAT,UAAoB,KAAKF,KAA/B;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,cAAD;AACE,QAAA,KAAK,EAAC,uBADR;AAEE,QAAA,MAAM,EAAEE,MAFV;AAGE,QAAA,KAAK,EAAED,KAHT;AAIE,QAAA,IAAI,EAAC,cAJP;AAKE,QAAA,QAAQ,EAAE,KAAKK,gBALjB;AAME,QAAA,UAAU,EAAE,KAAKH,UANnB;AAOE,QAAA,aAAa,EAAE,KAAKkB,aAPtB;AAQE,QAAA,eAAe,EAAE,KAAKW,eARxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAWE,oBAAC,gBAAD,oBAAsB,KAAKrB,KAA3B;AAAkC,QAAA,yBAAyB,EAAE,KAAKuB,yBAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAXF,CADF;AAeD;;AAhF6B;;AAA1BnC,EAAAA,OADoC,CAEjCqC,SAFiC,GAErB;AACjB3B,IAAAA,OAAO,EAAEhB,SAAS,CAAC4C,KAAV,CAAgB;AACvBnB,MAAAA,IAAI,EAAEzB,SAAS,CAAC6C;AADO,KAAhB,EAENC,UAHc;AAIjB7B,IAAAA,QAAQ,EAAEjB,SAAS,CAAC6C,IAAV,CAAeC;AAJR,GAFqB;AAmF1C,SAAOhD,OAAO,GAAGD,UAAU,CAACS,OAAD,CAAb,CAAd;AACD;;AAED,eAAeF,gBAAf","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport * as firebase from 'firebase/app';\nimport PropTypes from 'prop-types';\nimport ModalLoginForm from '../ModalLoginForm';\nimport { auth, authError } from '../../../redux/actions/authActions';\n\nfunction withAuthFirebase(WrappedComponent) {\n  class HocAuth extends Component {\n    static propTypes = {\n      history: PropTypes.shape({\n        push: PropTypes.func,\n      }).isRequired,\n      dispatch: PropTypes.func.isRequired,\n    };\n\n    state = {\n      error: '',\n      isOpen: false,\n    };\n\n    closeModal = () => {\n      this.setState(prevState => ({\n        isOpen: !prevState.isOpen,\n      }));\n    }\n\n    onSubmitFireBase = ({ username, password }) => {\n      const { history, dispatch } = this.props;\n      this.setState({ error: '' });\n      firebase.auth().signInWithEmailAndPassword(username, password).then((res) => {\n        dispatch(auth({ name: res.user.email }));\n        history.push('/dashboard_mobile_app');\n        this.setState({ isOpen: false });\n      }).catch((error) => {\n        this.setState({ error: error.message });\n      });\n    };\n\n    onLoginGoogle = () => {\n      const { history, dispatch } = this.props;\n      const provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider)\n        .then((res) => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({ name: res.user.displayName, avatar: res.user.photoURL }));\n          history.push('/dashboard_mobile_app');\n        })\n        .catch((error) => {\n          dispatch(authError(error.message));\n        });\n    }\n\n    onLoginFacebook = () => {\n      const { history, dispatch } = this.props;\n      const provider = new firebase.auth.FacebookAuthProvider();\n      firebase.auth().signInWithPopup(provider)\n        .then((res) => {\n          localStorage.setItem('easydev', res.credential.accessToken);\n          dispatch(auth({ name: res.user.displayName, avatar: res.user.photoURL }));\n          history.push('/dashboard_mobile_app');\n        })\n        .catch((error) => {\n          dispatch(authError(error.message));\n        });\n    }\n\n    changeIsOpenModalFireBase = () => {\n      this.setState({ isOpen: true, error: '' });\n    };\n\n    render() {\n      const { error, isOpen } = this.state;\n      return (\n        <div className=\"account\">\n          <ModalLoginForm\n            title=\"Sign in with Firebase\"\n            isOpen={isOpen}\n            error={error}\n            form=\"log_in_modal\"\n            onSubmit={this.onSubmitFireBase}\n            closeModal={this.closeModal}\n            onGoogleClick={this.onLoginGoogle}\n            onFacebookClick={this.onLoginFacebook}\n          />\n          <WrappedComponent {...this.props} changeIsOpenModalFireBase={this.changeIsOpenModalFireBase} />\n        </div>\n      );\n    }\n  }\n  return connect()(withRouter(HocAuth));\n}\n\nexport default withAuthFirebase;\n"]},"metadata":{},"sourceType":"module"}